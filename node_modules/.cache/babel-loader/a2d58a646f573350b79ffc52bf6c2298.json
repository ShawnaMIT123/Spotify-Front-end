{"ast":null,"code":"import { ApiUrl } from '../components/Assets/ApiUrl';\nimport { headers } from '../auth/AuthHeaders';\nimport { UPDATE_AUTHORIZATION, LOGOUT_USER, UPDATE_ROOM_PLAYLIST } from './types'; // export function fetchAuthorization(code) {\n//   return (dispatch) => {\n//     // return fetch(`${ApiUrl}spotifyusers?code=${code}`, {\n//       method: 'POST',\n//       headers: headers()\n//     })\n//     .then(response => response.json())\n//     .then(json => {\n//       // Save JWT in local storage, then update auth in store\n//       localStorage.setItem('jwt', json.jwt)\n//       return dispatch({type: UPDATE_AUTHORIZATION, payload: {user:json.user}})\n//     })\n//   }\n// }\n\nexport function currentUser() {\n  return function (dispatch) {\n    return fetch(\"\".concat(ApiUrl, \"auth\"), {\n      headers: headers()\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      console.log(json);\n\n      if (!json.error) {\n        return dispatch({\n          type: UPDATE_AUTHORIZATION,\n          payload: {\n            user: json\n          }\n        });\n      }\n    });\n  };\n}\nexport function getRoomTracks() {\n  return function (dispatch) {\n    return fetch(\"\".concat(ApiUrl, \"rooms\"), {\n      headers: headers()\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      console.log(json);\n\n      if (!json.error) {\n        return dispatch({\n          type: UPDATE_ROOM_PLAYLIST,\n          payload: {\n            playlist: json\n          }\n        });\n      }\n    });\n  };\n}\nexport function logoutUser() {\n  return {\n    type: LOGOUT_USER\n  };\n}","map":{"version":3,"sources":["/Users/Shawnie/Development/Spotify API Intro/frontend/src/actions/AuthActions.js"],"names":["ApiUrl","headers","UPDATE_AUTHORIZATION","LOGOUT_USER","UPDATE_ROOM_PLAYLIST","currentUser","dispatch","fetch","then","response","json","console","log","error","type","payload","user","getRoomTracks","playlist","logoutUser"],"mappings":"AAAA,SAASA,MAAT,QAAuB,6BAAvB;AACA,SAASC,OAAT,QAAyB,qBAAzB;AACA,SACEC,oBADF,EAEEC,WAFF,EAGEC,oBAHF,QAIO,SAJP,C,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASC,WAAT,GAAsB;AAC3B,SAAO,UAACC,QAAD,EAAc;AACnB,WAAOC,KAAK,WAAIP,MAAJ,WAAkB;AAC5BC,MAAAA,OAAO,EAAEA,OAAO;AADY,KAAlB,CAAL,CAGNO,IAHM,CAGD,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,KAHP,EAINF,IAJM,CAID,UAAAE,IAAI,EAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,UAAI,CAACA,IAAI,CAACG,KAAV,EAAgB;AACd,eAAOP,QAAQ,CAAC;AAACQ,UAAAA,IAAI,EAAEZ,oBAAP;AAA6Ba,UAAAA,OAAO,EAAE;AAACC,YAAAA,IAAI,EAAEN;AAAP;AAAtC,SAAD,CAAf;AACD;AACF,KATM,CAAP;AAUD,GAXD;AAYD;AACD,OAAO,SAASO,aAAT,GAAwB;AAC7B,SAAO,UAACX,QAAD,EAAc;AACnB,WAAOC,KAAK,WAAIP,MAAJ,YAAmB;AAC7BC,MAAAA,OAAO,EAAEA,OAAO;AADa,KAAnB,CAAL,CAGNO,IAHM,CAGD,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,KAHP,EAINF,IAJM,CAID,UAAAE,IAAI,EAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,UAAI,CAACA,IAAI,CAACG,KAAV,EAAgB;AACd,eAAOP,QAAQ,CAAC;AAACQ,UAAAA,IAAI,EAAEV,oBAAP;AAA6BW,UAAAA,OAAO,EAAE;AAACG,YAAAA,QAAQ,EAAER;AAAX;AAAtC,SAAD,CAAf;AACD;AACF,KATM,CAAP;AAUD,GAXD;AAYD;AAED,OAAO,SAASS,UAAT,GAAqB;AAC1B,SAAO;AAACL,IAAAA,IAAI,EAAEX;AAAP,GAAP;AACD","sourcesContent":["import { ApiUrl } from '../components/Assets/ApiUrl'\nimport { headers }  from '../auth/AuthHeaders'\nimport {\n  UPDATE_AUTHORIZATION,\n  LOGOUT_USER,\n  UPDATE_ROOM_PLAYLIST\n} from './types'\n\n// export function fetchAuthorization(code) {\n//   return (dispatch) => {\n//     // return fetch(`${ApiUrl}spotifyusers?code=${code}`, {\n//       method: 'POST',\n//       headers: headers()\n//     })\n//     .then(response => response.json())\n//     .then(json => {\n//       // Save JWT in local storage, then update auth in store\n//       localStorage.setItem('jwt', json.jwt)\n//       return dispatch({type: UPDATE_AUTHORIZATION, payload: {user:json.user}})\n//     })\n//   }\n// }\n\nexport function currentUser(){\n  return (dispatch) => {\n    return fetch(`${ApiUrl}auth`, {\n      headers: headers()\n    })\n    .then(response => response.json())\n    .then(json => {\n      console.log(json)\n      if (!json.error){\n        return dispatch({type: UPDATE_AUTHORIZATION, payload: {user: json}})\n      }\n    })\n  }\n}\nexport function getRoomTracks(){\n  return (dispatch) => {\n    return fetch(`${ApiUrl}rooms`, {\n      headers: headers()\n    })\n    .then(response => response.json())\n    .then(json => {\n      console.log(json)\n      if (!json.error){\n        return dispatch({type: UPDATE_ROOM_PLAYLIST, payload: {playlist: json}})\n      }\n    })\n  }\n}\n\nexport function logoutUser(){\n  return {type: LOGOUT_USER}\n}\n"]},"metadata":{},"sourceType":"module"}